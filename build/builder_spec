FROM golang:1.17.2
ARG CODE_DIR
ARG GOCACHE_DIR
ARG GOMODCACHE_DIR
RUN go env -w GOCACHE=${GOCACHE_DIR}
RUN go env -w GOMODCACHE=${GOMODCACHE_DIR}

WORKDIR ${CODE_DIR}
ENTRYPOINT ["make"]